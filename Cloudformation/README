# üöÄ Desafio DIO: Implementando a Primeira Stack com AWS CloudFormation

Este reposit√≥rio documenta a implementa√ß√£o do laborat√≥rio "Implementando sua Primeira Stack com AWS CloudFormation" da [Digital Innovation One (DIO)](https://dio.me/).

O objetivo principal foi aplicar os conceitos de **Infraestrutura como C√≥digo (IaC)** para provisionar, de forma automatizada, um ambiente de nuvem na AWS. O projeto consiste em um template CloudFormation que cria uma inst√¢ncia EC2 (servidor virtual) e a configura como um servidor web Apache.

## üìå Sum√°rio

* [O que √© AWS CloudFormation e IaC?](#-o-que-√©-aws-cloudformation-e-iac)
* [Tecnologias Utilizadas](#-tecnologias-utilizadas)
* [Conceitos-Chave Aplicados](#-conceitos-chave-aplicados)
* [Descri√ß√£o do Projeto (A Stack)](#-descri√ß√£o-do-projeto-a-stack)
* [O Template (`minha-primeira-stack.yaml`)](#-o-template-minha-primeira-stackyaml)
* [Resultados e Insights](#-resultados-e-insights)
* [Conclus√£o](#-conclus√£o)

## üí° O que √© AWS CloudFormation e IaC?

**Infraestrutura como C√≥digo (IaC)** √© a pr√°tica de gerenciar e provisionar infraestrutura (redes, servidores, bancos de dados) por meio de arquivos de defini√ß√£o leg√≠veis por m√°quina (c√≥digo), em vez de configura√ß√£o manual ou ferramentas interativas.

O **AWS CloudFormation** √© o servi√ßo da AWS que nos permite aplicar o IaC. N√≥s escrevemos um **template** (em YAML ou JSON) que descreve todos os recursos da AWS que desejamos (ex: "quero uma inst√¢ncia EC2" e "quero um grupo de seguran√ßa"). O CloudFormation l√™ esse template e cuida de provisionar, configurar e conectar todos esses recursos na ordem correta, tratando as depend√™ncias automaticamente.

Os principais benef√≠cios s√£o:
* **Automatiza√ß√£o:** Cria√ß√£o e exclus√£o de ambientes completos com um √∫nico comando.
* **Consist√™ncia:** Garante que o ambiente de desenvolvimento seja id√™ntico ao de produ√ß√£o.
* **Versionamento:** O template pode ser versionado no Git, como qualquer outro c√≥digo.
* **Reutiliza√ß√£o:** O mesmo template pode ser usado para criar m√∫ltiplas "Stacks".

## üõ†Ô∏è Tecnologias Utilizadas

* **AWS CloudFormation:** Para a orquestra√ß√£o e provisionamento da infraestrutura.
* **AWS EC2 (Elastic Compute Cloud):** Para provisionar o servidor virtual (inst√¢ncia).
* **AWS VPC (Security Groups):** Para configurar as regras de firewall da inst√¢ncia.
* **YAML:** A linguagem utilizada para escrever o template do CloudFormation.
* **Bash Script (em `UserData`):** Para instalar e configurar o servidor web Apache.

## üß† Conceitos-Chave Aplicados

Durante o laborat√≥rio, os seguintes pilares do CloudFormation foram aplicados:

1.  **Template:** O arquivo YAML (`minha-primeira-stack.yaml`) que serve como "planta baixa" da nossa infraestrutura.
2.  **Stack:** A inst√¢ncia da nossa infraestrutura, ou seja, o conjunto de recursos que o CloudFormation criou a partir do template.
3.  **Parameters:** Permite customizar o template na hora da cria√ß√£o da Stack. No nosso caso, usamos o `InstanceType` para poder escolher o "tamanho" da m√°quina (ex: `t2.micro`).
4.  **Resources:** A se√ß√£o mais importante do template. √â a lista de recursos que a AWS deve criar. N√≥s definimos dois:
    * `AWS::EC2::SecurityGroup`: O firewall.
    * `AWS::EC2::Instance`: O servidor.
5.  **`UserData`:** Uma propriedade especial da inst√¢ncia EC2 que nos permite executar um script de *bootstrap* (configura√ß√£o inicial) assim que a m√°quina √© ligada. Usamos isso para instalar o Apache.
6.  **`!Ref` e `!Sub`:** Fun√ß√µes intr√≠nsecas do CloudFormation.
    * `!Ref InstanceType`: Usado para "pegar" o valor fornecido no par√¢metro `InstanceType`.
    * `!Ref WebServerSecurityGroup`: Usado para "pegar" o ID do grupo de seguran√ßa que foi criado no mesmo template e associ√°-lo √† inst√¢ncia.
7.  **Outputs:** Permite que a Stack "devolva" informa√ß√µes √∫teis ap√≥s a cria√ß√£o. Usamos isso para exibir a URL p√∫blica do nosso novo site.

## üîß Descri√ß√£o do Projeto (A Stack)

A Stack definida no template `minha-primeira-stack.yaml` provisiona um servidor web simples e p√∫blico. Ela cria os seguintes recursos:

1.  **Um Grupo de Seguran√ßa (`WebServerSecurityGroup`):**
    * Libera a **Porta 80 (HTTP)** para o mundo (`0.0.0.0/0`), permitindo que qualquer pessoa acesse nosso site.
    * Libera a **Porta 22 (SSH)** para o mundo (`0.0.0.0/0`), permitindo o acesso de administrador (em um ambiente real, isso seria restrito a um IP espec√≠fico).

2.  **Uma Inst√¢ncia EC2 (`WebServerInstance`):**
    * Usa o `InstanceType` definido no par√¢metro (padr√£o `t2.micro`).
    * Usa uma AMI (Imagem) do Amazon Linux 2.
    * Associa o grupo de seguran√ßa criado acima.
    * Executa um script `UserData` que instala o `httpd` (Servidor Apache), inicia o servi√ßo e cria um arquivo `index.html` de teste.

3.  **Uma Sa√≠da (`WebsiteURL`):**
    * Exp√µe publicamente o DNS da inst√¢ncia EC2, formatado como uma URL clic√°vel (`http://...`).

## üìë O Template (`minha-primeira-stack.yaml`)

O c√≥digo-fonte completo da nossa infraestrutura est√° dispon√≠vel no arquivo [minha-primeira-stack.yaml](minha-primeira-stack.yaml).



## ‚ú® Resultados e Insights

* **O "Momento Aha!":** O maior insight foi ver a infraestrutura subir sozinha. Ap√≥s fazer o upload do template e clicar em "Create Stack", foi poss√≠vel assistir o CloudFormation criar o Security Group e depois a Inst√¢ncia, sem nenhuma interven√ß√£o manual.
* **Poder da Automa√ß√£o:** O verdadeiro poder foi visto ao **excluir a Stack**. Com um √∫nico clique em "Delete", o CloudFormation desfez *tudo* o que havia criado (inst√¢ncia e security group), limpando o ambiente perfeitamente. Isso √© imposs√≠vel de garantir manualmente.
* **Depura√ß√£o (Debugging):** Um desafio comum √© quando a Stack falha (status `ROLLBACK_COMPLETE`). Isso geralmente acontece por erros de sintaxe no YAML, permiss√µes do IAM, ou um AMI ID incorreto para a regi√£o. A aba "Events" no console do CloudFormation foi essencial para descobrir a causa do erro.

